(使用)
- CDAC+ボルテージフォロワのシミュレーション用回路
- VDD,Vrefh,Vrefl,PD(パワーダウン信号),CLK,10uAのIrefの入力と、D11(MSB)からD0(LSB)までの12個のデジタル入力。
- CLKの周期設定により、DACの動作速度を設定。
- 1pF、100MΩの負荷,OUTがVF出力。
- 今の入力設定の場合、Fs=5MSPSで動作し、000000000000から111111111111までの全通りのデジタル入力が入力されている。
- s6は消費電流(平均電流)を測定する。
- OPAmpP2の入力がVDDに近くなると、位相余裕が小さくなり、出力の安定性が下がる。また、位相余裕を大きくするとスルー・レートが遅くなるため、5MSSPSの仕様を満たせなくなる。これにより、VrefhとVreflは範囲を小さくし、VSSに近い方にシフトさせている。
- 出力のデータを取得するには、ngspiceのwrdataというコマンドを用いてtxtやcsvに変換する。「wrdara 出力ファイル名.txt V(OUT)」→user/xschem/userConf/simulationsの中に入る。